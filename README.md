<p align="right">
<a href="https://github.com/psf/black"><img alt="Code style: black" src="https://img.shields.io/badge/code%20style-black-000000.svg"></a>
</p>

# I'm sick of skimming over titles

[Real Python][rp] has some excellent articles about the Python language and
popular Python packages. But, if you're not searching for a particular topic
(i.e., you're just reading for fun), browsing for new articles can be a bit tedious.

Article titles usually only give you a hint into their content. When you're
staring a wall of titles in the face, it's not always easy to tell which ones
will be worth the click. Frequently, however, an article will catch (or fail to
catch) your attention from the introduction alone.

Wouldn't it be nice if I could just skim over the introductions?

## Fetch introductions for all [Real Python][rp] articles

This script depends on
* `requests`,
* `beautifulsoup4`,
* `lxml`,
* `html2markdown`, and
* `requests-cache`,
all of which can be installed via `pip`.

If you would like to generate summaries for all tutorials (premium and non-premium) on Real Python, then clone the repo and run the following:

```bash
python fetch.py --include-premium
```

*__Note:__* The script will take a few minutes to run and will produce lots of
output. Once it's done, files can be found in the `generated_markdown`
subdirectory. A large file (\~31 MiB) called `requests_cache.sqlite` will also
be created. This file stores all previously fetched articles, allowing you to
resume or rerun the script without bombarding the Real Python website with
hundreds of prior requests.


Alternatively, if you would like to generate summaries for specific topic tags (e.g., `advanced`, `django`, `docker`, `machine-learning`, etc.), simply provide each tag name:

```bash
python fetch.py advanced machine-learning
```

*__Note:__* This fetches all tutorials tagged as `advanced` *OR*
`machine-learning`. If you want to write more complicated search criteria,
read the following section.

An example markdown file generated by this script can be found [here][example-md].

## Customizing output using the Summarizer API

The following is an [example script][test-script] demonstrating how tutorials
can be filtered.

```python
import os

# Local imports
from summarizer import Summarizer

if __name__ == "__main__":

    s = Summarizer(
        include_premium=False,  # Do not include premium content
        output_dir="advanced_ml_tutorials",  # Specify output directory
    )

    selected_tutorials = [
        tutorial
        for topic in s.topics  # Iterate over all topics
        for tutorial in topic.tutorials  # Iterate over all tutorials within the topic
        if "advanced" in tutorial.tag_names  # Check that tutorial is tagged `advanced`
        and "machine-learning"
        in tutorial.tag_names  # and also tagged `machine-learning`
    ]

    # Check that we've found tutorials matching our criteria
    assert len(selected_tutorials) > 0

    filename = "advanced_ml_tutorials.md"
    path = os.path.join(s.output_dir, filename)

    print(f"\nWriting file `{path}`\n")

    with open(path, "w") as f:
        # Main title for the output
        f.write(f"# Advanced ML tutorials from Real Python" + "\n\n")

        for tutorial in selected_tutorials:
            # Title of the tutorial
            f.write(tutorial.markdown_title + "\n\n")

            # Include author, date, tags, and comments, if available
            if tutorial.has_metadata_string:
                f.write(tutorial.markdown_metadata_string + "\n\n")

            # Write first few paragraphs of the tutorial
            f.write(tutorial.markdown_introduction + "\n\n")
```

## Future tasks

- [X] Add support for fetching a particular topic.

- [X] Fetch author name, publication date, and number of comments, if available

- [X] Allow sorting of tutorials by level of engagement (e.g., number of comments)

- [X] Accept command line arguments.

- [ ] Convert all markdown links to reference style

- [ ] Allow option to include Table of Contents for each article

- [ ] Implement output formats other than markdown

[rp]: https://realpython.com
[topics]: https://realpython.com/tutorials/all/
[example-md]: examples/docker%20tutorials%20and%20courses.md
[test-script]: test_summarizer.py
